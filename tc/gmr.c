#include <stdio.h>


/* [32,16,8]-BCH */
unsigned int bch31=0b1111010111110001000000000000000; /* seed */

static unsigned int bch[16]={
0b11110101111100010000000000000001,
0b01111010111110001000000000000001,
0b00111101011111000100000000000001,
0b00011110101111100010000000000001,
0b00001111010111110001000000000001,
0b00000111101011111000100000000001,
0b00000011110101111100010000000001,
0b00000001111010111110001000000001,
0b00000000111101011111000100000001,
0b00000000011110101111100010000001,
0b00000000001111010111110001000001,
0b00000000000111101011111000100001,
0b00000000000011110101111100010001,
0b00000000000001111010111110001001,
0b00000000000000111101011111000101,
0b00000000000000011110101111100011
};


static char *G[32]={
"1000000000000000",
"1100000000000000",
"1110000000000000",
"1111000000000000",
"0111100000000000",
"1011110000000000",
"0101111000000000",
"1010111100000000",
"1101011110000000",
"1110101111000000",
"1111010111100000",
"1111101011110000",
"0111110101111000",
"0011111010111100",
"0001111101011110",
"1000111110101111",
"0100011111010111",
"0010001111101011",
"0001000111110101",
"0000100011111010",
"0000010001111101",
"0000001000111110",
"0000000100011111",
"0000000010001111",
"0000000001000111",
"0000000000100011",
"0000000000010001",
"0000000000001000",
"0000000000000100",
"0000000000000010",
"0000000000000001",
"1111111111111111"
};
unsigned int y[16]={
2684963189,3303584276,4009345434,2712796887,3814348157,2682108207,2703150623,3235726140,
2451390357,3236153611,3373432607,3333993281,2282060223,2669313991,3455372219,3147915730
};
static char *dm[16]={
"10100000000010010100100101110101",
"11000100111010001011001000010100",
"11101110111110011100000110011010",
"10100001101100011111111011010111",
"11100011010110100101010101111101",
"10011111110111011011100100101111",
"10100001000111101100111000011111",
"11000000110111010100001100111100",
"10010010000111010011111110010101",
"11000000111000111100100100001011",
"11001001000100100111111100011111",
"11000110101110001011001101000001",
"10001000000001010111100110111111",
"10011111000110100111111111000111",
"11001101111101001100101110111011",
"10111011101000010110000111010010"
};
unsigned short r='Šâ';
int dmt[32]={
0b1111111111111111,
0b0110100101110010,
0b1011101000000001,
0b0000010010000101,
0b0010010000101111,
0b0110010000010110,
0b0010110010010101,
0b0001111000100111,
0b0111010101010011,
0b0110110101000010,
0b0111000001010011,
0b0011111110110110,
0b1110111110010100,
0b0000011110001010,
0b0000101001100100,
0b1011010111001001,
0b0111011001010010,
0b1011101101101111,
0b0101010010111101,
0b0101110010111100,
0b1001011011101110,
0b0001101010100100,
0b0101001110110110,
0b1010110111111111,
0b0011000010001111,
0b1001100000010101,
0b1000110100001010,
0b1111101110101011,
0b0010111101101010,
0b1101111110101100,
0b0011011001101111,
0b1001111011111110
};
static unsigned int bd[16]={
0b01010101111110000100100101110100,
0b10111110000100000011001000010101,
0b11010011100001011000000110011011,
0b10111111000011111101111011010110,
0b11101100000001010100010101111100,
0b10011000011100100011000100101110,
0b10100010110010010000101000011110,
0b11000001001101101010000100111101,
0b10010010111010001100111010010100,
0b11000000100110010011000110001010,
0b11001001001011110000001101011110,
0b11000110101001100000110101100000,
0b10001000000010100010011010101110,
0b10011111000111011101000001001110,
0b11001101111101110001110001111110,
0b10111011101000001000101000110001
},
bt[32]={
0b0111111111111111,
0b1010100101110010,
0b0101101000000001,
0b1111010010000101,
0b0101110000101111,
0b1101100000010110,
0b0111001010010101,
0b1011000100100111,
0b1010001011010011,
0b1000011010000010,
0b1000010110110011,
0b1100010101000110,
0b1001001011101100,
0b0011100100110110,
0b0001010100111010,
0b0011101001100110,
0b0011000110000101,
0b1001100010000100,
0b0100010101001000,
0b0101010001000110,
0b1001001010010011,
0b0001100010011010,
0b0101001010101001,
0b1010110101110000,
0b0011000011001000,
0b1001100000110110,
0b1000110100011011,
0b1111101110100011,
0b0010111101101110,
0b1101111110101110,
0b0011011001101110,
0b0110000100000001
};

main(){
unsigned int i,j,k,l;
char t[32];


for(i=0;i<32;i++)
printf("%d",itob(bt[i]&r,t));
printf("\n");


printf("%b\n",r);
for(i=0;i<32;i++)
printf("%d",itob(dmt[i]&r,t));
printf("\n");

for(i=0;i<32;i++){
l=strtoul(G[i],(char **)NULL,2);
printf("%d",itob(l&r,t));
}
printf("\n");
k=0b10110100010101011001000000101101;
l=0b11111001110010000111011000000101;
printf("%b\n",l^k);

/*
for(i=0;i<16;i++){
l=strtoul(dm[i],(char **)NULL,2);
printf("%b\n",bch[i]^l);
}
*/


}



int itob(int n,char s[])
{
int i,j,k=0;

for(i=15,j=0;i>=0;i--,j++){
s[j]=((n>>i) & 0x0001) + '0';
}

for(j=0;j<16;j++){
if(s[j]-48==1)
k++;
}
return k%2;

}


int bit(int n,int k)
{
int i,j;
char s[32];

for(i=32,j=0;i>=0;i--,j++){
s[j]=((n>>i) & 0x0001) + '0';
}

return s[k+1]-48;

}


/*
1000101011100010

10110100010101011001000000101101=r*G
11111001110010000111011000000101=r*D

01001101100111011110011000101000=r*D^r*G

01001101100111011110011000101000=r*G^D

*/

